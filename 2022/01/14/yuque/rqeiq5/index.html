<!DOCTYPE HTML>
<html lang="zh-CN">


    <head>
        <meta charset="utf-8">
        <meta name="keywords" content="聊聊DevOps制品管理-不止是存储制品这么简单, DevOps在路上|DevOps|Docker|CICD|K8S">
        <meta name="description" content="Every failure is leading towards success.">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <!-- 表示页面同时适合在移动设备和PC上进行浏览。 -->
        <meta name="applicable-device" content="pc,mobile">
        <meta name="renderer" content="webkit|ie-stand|ie-comp">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="format-detection" content="telephone=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <!-- 添加百度统计和谷歌统计代码 -->
        <meta name="baidu-site-verification" content="code-KajABoHffk" />
        <!-- <meta name="google-site-verification" content="yCy2azpds5XSuGZvis6OuA-XIGF5GuGpYRAaGfD6o48" />
        <meta name="360-site-verification" content="b7c11a830ef90fd1464ad6206bb7b6e7" /> -->

        <!-- Global site tag (gtag.js) - Google Analytics -->


            <title>
                聊聊DevOps制品管理-不止是存储制品这么简单 | DevOps在路上
            </title>
            <link rel="icon" type="image/png" href="/favicon.png">

            <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
            <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
            <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
            <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
            <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
            <link rel="stylesheet" type="text/css" href="/css/matery.css">
            <link rel="stylesheet" type="text/css" href="/css/my.css">


            <script src="/libs/jquery/jquery.min.js"></script>

    <meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="DevOps在路上" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>



<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">DevOps在路上</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">DevOps在路上</div>
        <div class="logo-desc">
            
            Every failure is leading towards success.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/owen2016/owen2016.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/owen2016/owen2016.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/15.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">聊聊DevOps制品管理-不止是存储制品这么简单</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-01-14
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2022-07-31
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    10 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="什么是制品？"><a href="#什么是制品？" class="headerlink" title="什么是制品？"></a>什么是制品？</h2><p><strong>制品</strong>是指由源码编译打包生成的二进制文件，不同的开发语言对应着不同格式的二进制文件；这些二进制文件通常用于运行在服务器上或者作为编译依赖,“制品的管理”是配置管理的重要组成部分。</p>
<p>通常，这些组件是各种文件的存档，包括：类文件中的 Java 字节码、C 对象文件、文本文件、二进制文件。组件的多种格式，例如：Java JAR，WAR，EAR 格式；普通 ZIP 或.tar.gz 文件；其他软件包格式，例如 NuGet 软件包，Ruby gems，NPM 软件包；可执行文件格式，例如.exe 或.sh 文件，Android APK 文件，各种安装程序格式。</p>
<p><strong>按照使用场景，制品大致分为三类</strong></p>
<ol>
<li>外部引入的第三方组件</li>
<li>产品内部依赖包，公共 SDK</li>
<li>产品交付安装包</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1642823900704-0695efe9-03f9-4062-abf7-af2317b67fc2.png#clientId=u121e30f5-3b13-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=325&id=ue8d0710f&margin=%5Bobject%20Object%5D&name=image.png&originHeight=537&originWidth=1437&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=185047&status=done&style=none&taskId=u1d66f15d-a104-4630-8a08-826682730f3&title=&width=870" alt="image.png"><br><strong>按照开发语言，制品类型包含以下类型：</strong></p>
<ul>
<li>Generic File 指的是通用文件类型的制品。</li>
<li>Docker</li>
<li>Maven</li>
<li>npm</li>
<li>PyPI</li>
<li>Helm</li>
<li>Composer</li>
<li>NuGet</li>
<li>Conan</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645267322133-1627f1ab-7d1c-43d4-9ee7-ef23570e2d4c.png#clientId=ua5ff6c33-2b41-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=158&id=u621d9a5c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=199&originWidth=1072&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=120065&status=done&style=none&taskId=uf5e19b33-af68-4c8c-8278-8d8fcdd0b68&title=&width=849" alt="image.png"></p>
<h2 id="为什么要制品管理？"><a href="#为什么要制品管理？" class="headerlink" title="为什么要制品管理？"></a>为什么要制品管理？</h2><ol>
<li>外部依赖下载慢</li>
</ol>
<ul>
<li>影响研发构建速度</li>
</ul>
<ol start="2">
<li>版本管理混乱 （svn,ftp）</li>
</ol>
<ul>
<li>交付包使用 FTP 或者 SVN 进行管理，管理粒度相对较粗；在这种粗放式的制品管理方式下，不同类型包的存储与获取是一件头疼的事情，版本追踪极其混乱，团队协作也是障碍重重。</li>
<li>由于受到监管约束，一键部署是不可能任务，跨网段的包交付智能依赖于手工拷贝</li>
</ul>
<ol start="3">
<li>安全漏洞风险</li>
</ol>
<ul>
<li>依赖组件越多，引入漏洞的风险也越高</li>
<li>第三方依赖包下载管理混乱，没有准入管控</li>
<li>漏洞藏的越深，修复漏洞所花费的时间就越长</li>
</ul>
<ol start="4">
<li>制品存储风险</li>
</ol>
<ul>
<li>团队内部搭建的制品库是单点的，缺乏集群部署</li>
</ul>
<ol start="5">
<li>资源浪费</li>
</ol>
<ul>
<li>因为没有统一的制品库，存在重复建设的问题；维护成本高，或者说目前根本就没有维护</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1642823993983-ad099612-d7b2-4b7b-8c8d-9f9394846ded.png#clientId=u121e30f5-3b13-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=401&id=pMAbI&margin=%5Bobject%20Object%5D&name=image.png&originHeight=481&originWidth=747&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=283692&status=done&style=none&taskId=u50504f7e-da1d-4ea6-94d3-0d4e4898dbf&title=&width=623" alt="image.png"></p>
<h2 id="制品和-CI-CD-流水线"><a href="#制品和-CI-CD-流水线" class="headerlink" title="制品和 CI/CD 流水线"></a>制品和 CI/CD 流水线</h2><p><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645230369369-92f7e8b2-4228-4df0-80a6-e4d2f981b5ed.png#clientId=u67e39b42-944c-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=364&id=fgt5w&margin=%5Bobject%20Object%5D&name=image.png&originHeight=548&originWidth=1110&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=209092&status=done&style=none&taskId=ucc898842-dd0f-4db5-9045-df489ef5ae4&title=&width=737" alt="image.png"><br>对于 CI/CD 流水线而言，制品起到一个<strong>承上启下</strong>的关键作用，它是持续集成 CI 的终点，同时也是持续交付 CD 的起点。</p>
<p>如果缺乏有效的制品管理策略和工具，根本不可能建立高效的流水线；脱离制品管理，每次只能重新从代码开始构建，对于任何企业组织是不可接受的，同时也不符合“一次构建，多次使用”的原则。</p>
<p>在整个研发过程中，制品对于测试人员和运维人员至关重要，他们关注的是怎么拿到需要的版本进行测试和部署，如果缺乏有效的制品管理，整个 DevOps 价值流就会出现衔接上的问题。你可能会碰到这种情况，测试同学会通过各种方式去询问那个版本可以测试，包在哪里等情况。</p>
<p><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1642824037961-c73ebd96-709f-406e-b881-cc24cadaa162.png#clientId=u121e30f5-3b13-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=285&id=bWd6A&margin=%5Bobject%20Object%5D&name=image.png&originHeight=602&originWidth=1507&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=215076&status=done&style=none&taskId=ufb92dac4-f0a1-4986-b809-558ab14b889&title=&width=714" alt="image.png"></p>
<h3 id="包的元数据"><a href="#包的元数据" class="headerlink" title="包的元数据"></a>包的元数据</h3><p>何为包的元数据？别人给你一个包，你怎么知道包里包含了哪些需求缺陷变更，包含了哪些代码提交，还有包的 md5,hash 等信息。这些信息对于测试人员<strong>追踪问题的引入，后续改进，版本回归</strong>至关重要，通俗点说，弄清楚制品的前世今生。</p>
<p>那么这些信息哪里来？当然是持续构建 CI 流水线，需求，代码提交都可以通过 CI 流水线收集。如果你的组织购买过 Jfrog 的产品，会发现这个特点在的它的平台上尤为突出。</p>
<h3 id="制品的晋级"><a href="#制品的晋级" class="headerlink" title="制品的晋级"></a>制品的晋级</h3><p>在开发实践中，大多数团队会准备 DEV, TEST, UAT, RELEASE 等不同的环境，相应的建设不同的流水线，将制品部署到不同的环境前都会对制品进行不同的测试，所里这里也衍生出来了制品的晋级，就是给制品设置不同的准入门禁。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645256523287-5c6006cd-3a23-4e87-90e9-ccd42a9504b6.png#clientId=u7e7dce47-1975-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=389&id=ued8e2eda&margin=%5Bobject%20Object%5D&name=image.png&originHeight=771&originWidth=1426&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=450246&status=done&style=none&taskId=ua9c9bdc8-b6ee-45db-ae5a-76683021381&title=&width=719" alt="image.png"><br>综上所属，制品和 CI/CD 流水线有着紧密的联系，不可分割，在设计流水线时候要考虑好制品的使用场景。</p>
<h2 id="制品管理工具"><a href="#制品管理工具" class="headerlink" title="制品管理工具"></a>制品管理工具</h2><p>如上所述，由于制品管理的重要性，所以衍生出来对应的制品解决方案用来统一管理不同格式的软件制品。 除了基本的存储功能，还提供了版本控制、访问控制、安全扫描、依赖分析等重要功能，最终建立“单一可信源”，是一种企业处理软件开发过程中产生的所有包类型的标准化方式。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645233233874-12d53638-566a-478e-8d3a-08493b2c8482.png#clientId=u32c84d3f-ce40-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=344&id=u10120188&margin=%5Bobject%20Object%5D&name=image.png&originHeight=733&originWidth=1342&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=208058&status=done&style=none&taskId=ubcc0a23c-52bf-498b-b69c-5c477dad9c3&title=&width=630" alt="image.png"><br>目前主市场上主流的制品管理工具主要有以下几种：</p>
<h3 id="Nexus"><a href="#Nexus" class="headerlink" title="Nexus"></a>Nexus</h3><p>Nexus 是一套“开箱即用”的系统不需要数据库，它使用文件系统加 Lucene 来组织数据。Nexus 使用 ExtJS 来开发界面，利用 Restlet 来提供完整的 REST APIs，通过 m2eclipse 与 Eclipse 集成使用。Nexus 支持 WebDAV 与 LDAP 安全身份认证。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645233361951-aeac567a-cd45-44ca-a8aa-db28b2660d1f.png#clientId=u32c84d3f-ce40-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=327&id=uff8aff58&margin=%5Bobject%20Object%5D&name=image.png&originHeight=468&originWidth=1136&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=84390&status=done&style=none&taskId=u2fcd7445-f5b0-4150-b340-55005b55042&title=&width=794" alt="image.png"></p>
<p>Nexus 是少有的支持几乎所有主流制品格式，并且提供免费版的制品管理产品，这也是大多数中小公司的选择，可以满足大部分业务场景，但是，免费版不提供高可用方案。<br>价格参考： <a target="_blank" rel="noopener" href="https://www.sonatype.com/products/pricing?topnav=true">https://www.sonatype.com/products/pricing?topnav=true</a><br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645233543803-24699daf-ea08-4010-8cd1-dc682808f738.png#clientId=u32c84d3f-ce40-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=263&id=XYAs0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=342&originWidth=1098&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=46136&status=done&style=none&taskId=u67702115-1cb7-4826-abfb-7822d936c42&title=&width=844" alt="image.png"><br>由于 Nexus 在国内没有代理商，所以大家对它的认知还有限，其实 Nexus 仅仅是<a target="_blank" rel="noopener" href="https://www.sonatype.com/">sonatype</a>产品解决方案的一种，提供对软件研发周期的制品管理方案。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645250966191-b5b66c09-0c2d-4a83-9295-0beaf0116cf3.png#clientId=u32c84d3f-ce40-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=388&id=u35b8f518&margin=%5Bobject%20Object%5D&name=image.png&originHeight=633&originWidth=1225&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=74569&status=done&style=none&taskId=u6e6fc659-b162-45a4-8215-fc36de5fd6a&title=&width=751" alt="image.png"></p>
<h3 id="Jfrog-Artifactory"><a href="#Jfrog-Artifactory" class="headerlink" title="Jfrog Artifactory"></a>Jfrog Artifactory</h3><p>Jfrog 是一家以色列公司，专注于制品管理环境，提供商用的解决方案，所以它的产品是要花钱的。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645251112457-2a78691d-229b-4a32-99f8-207cc8265901.png#clientId=u32c84d3f-ce40-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=352&id=ub5811adb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=539&originWidth=1181&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=144244&status=done&style=none&taskId=uee218f2f-8c30-437e-97a1-52f9bb89c03&title=&width=772" alt="image.png"><br>下图列出了 Jfrog Artifactory 和 Nexus 的产品特点对比，仅供参考。既然是掏钱买的，肯定比免费的 Nexus 提供的支持和服务更多，包括高可用，组件的漏洞风险分析，多地分发等等。不是说 Nexus 不行，而是我们大家用的大部分都是 Nexus 的免费版，其实它的收费版也提供类似的方案。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645233474360-66441376-234d-4fdc-a0cb-c0f7c303c54a.png#clientId=u32c84d3f-ce40-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=412&id=u0da0eae5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=757&originWidth=1417&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=415674&status=done&style=none&taskId=u941b21fe-7565-48e1-a8a9-0a489473d88&title=&width=771" alt="image.png"></p>
<h3 id="Harbor"><a href="#Harbor" class="headerlink" title="Harbor"></a>Harbor</h3><p>Harbor 是 VMware 公司<strong>开源</strong>的企业级 Docker Registry 项目，其目标是帮助用户迅速搭建一个企业级的 Docker registry 服务。</p>
<p>基于官方 Registry V2 实现，提供了管理 UI，基于角色的访问控制(Role Based AccessControl)，AD/LDAP 集成、以及审计日志(Auditlogging) 等企业用户需求的功能，通过添加一些企业必需的功能特性，例如安全、标识和管理等，扩展了开源 Docker Distribution。</p>
<p>Harbor 目前已经成为私有 Docker/Helm 管理的主要工具，相比于 Nexus, Harbor 在 docker 镜像的管理方面更有优势，提供镜像同步服务，支持团队项目隔离。在实践过程中，笔者发现 Nexus 在 docker 镜像的团队隔离方面上，存在一些问题。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645250918970-c35307b7-fdd5-4d04-bd5b-0b58f140744d.png#clientId=u32c84d3f-ce40-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=356&id=u68823e5a&margin=%5Bobject%20Object%5D&name=Snipaste_2022-02-19_09-39-12.png&originHeight=653&originWidth=1656&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=59534&status=done&style=none&taskId=u4d41760c-8046-4d62-99e1-4117d219f68&title=&width=902" alt="Snipaste_2022-02-19_09-39-12.png"></p>
<h3 id="WePack"><a href="#WePack" class="headerlink" title="WePack"></a>WePack</h3><p>WePack 是腾讯 Coding 基于之前的 DevOps 拆分出来的单独的制品管理服务，支持私有化部署。也许也是看到单独的制品管理工具，比大而全的 DevOps 平台更好的切入用户场景吧。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645252578364-0735a6c3-8c16-4920-81d4-b5ffb918238d.png#clientId=u32c84d3f-ce40-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=449&id=u1af41741&margin=%5Bobject%20Object%5D&name=image.png&originHeight=603&originWidth=1259&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=185622&status=done&style=none&taskId=ua5fe50e9-18ec-4df5-82bd-4c42ad9ac9e&title=&width=937" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645253918727-2a81f443-d496-46fe-b23d-a490c58666f2.png#clientId=u7e7dce47-1975-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=422&id=ud985df42&margin=%5Bobject%20Object%5D&name=image.png&originHeight=582&originWidth=825&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=27771&status=done&style=none&taskId=uaac9fe92-3a70-4753-a6f3-a7cf68f518b&title=&width=598" alt="image.png"></p>
<h2 id="如何管理制品？"><a href="#如何管理制品？" class="headerlink" title="如何管理制品？"></a>如何管理制品？</h2><p>为了统一管理不同语言格式的包，以上制品管理工具几乎都按照如下方式管理组织制品。</p>
<p>制品库的层级关系为：仓库 &gt; 包 &gt; 版本，每个层级描述如下：</p>
<ul>
<li>仓库：用于管理不同类型的仓库和仓库下的包资源，可以设置仓库对外的访问权限。</li>
<li>包：构建产物对外提供访问的基础单元，用于介绍当前构建产物的用途和使用指引。</li>
<li>版本：列出某个包下的所有构建产物，详细记录了每次构建产物的版本迭代更新变化。</li>
</ul>
<h3 id="规范制品库命名"><a href="#规范制品库命名" class="headerlink" title="规范制品库命名"></a>规范制品库命名</h3><p>如果团队比较大一，对制品管理的要求不高，按照以上方式基本可以满足需求。但是，如果建设公司级别的需要规范一些命名，如下所示<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645255559771-f899a6fe-88be-4f0d-bb83-00f298e9aada.png#clientId=u7e7dce47-1975-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=265&id=u6022370a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=347&originWidth=724&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=157657&status=done&style=none&taskId=ue6fb1d84-b1ab-4c5e-aa05-e4cca362c95&title=&width=553" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645255681369-681e076d-25fa-4e50-b05c-83e8c9e6f60b.png#clientId=u7e7dce47-1975-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=198&id=u7328dc04&margin=%5Bobject%20Object%5D&name=image.png&originHeight=229&originWidth=630&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=101436&status=done&style=none&taskId=u10251052-30bd-4098-b513-a724864e365&title=&width=544" alt="image.png"></p>
<h3 id="制品版本号规范化"><a href="#制品版本号规范化" class="headerlink" title="制品版本号规范化"></a>制品版本号规范化</h3><p>制品的版本号用于标记特定制品，通过规范化命名有助于自动化脚本的编写和流水线的复用。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645256398308-12e40a28-76ee-480d-886d-5c60a79c95cd.png#clientId=u7e7dce47-1975-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=333&id=uaf87485c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=419&originWidth=855&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=97627&status=done&style=none&taskId=u653f85d6-a94a-4c2e-a182-fe4ab86a77a&title=&width=680" alt="image.png"></p>
<h3 id="制品库权限规范化"><a href="#制品库权限规范化" class="headerlink" title="制品库权限规范化"></a>制品库权限规范化</h3><p>不管是基于开源工具，还是自研工具，基于制品仓库的权限设计也是必要的，做到团队产品的隔离。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645256280495-92d355a2-7097-4d87-9d77-21622d860083.png#clientId=u7e7dce47-1975-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=394&id=u90b3be92&margin=%5Bobject%20Object%5D&name=image.png&originHeight=544&originWidth=996&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=238690&status=done&style=none&taskId=u8ace3334-18bb-43c2-b4d7-c921ec84e32&title=&width=721" alt="image.png"></p>
<h2 id="开源制品的安全风险"><a href="#开源制品的安全风险" class="headerlink" title="开源制品的安全风险"></a>开源制品的安全风险</h2><p>对于制品的管理，大多人数都停留在仅仅是存储，拉取使用的想法，笔者今年前也是这种思维。2021 年末的 Log4j2 的安全事件，引起了整个 IT 圈的轩然大波，这个开源组件几乎涉及所有的 java 应用，每个公司不得不紧急排查自己产品是否引入该风险。</p>
<p>通过该事件，让我们开始关注开源组件可能存在的风险，这也是目前比较热门的研发过程中的“<a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1709504114617115003%ED%94%B4=spider&for=pc">供应链安全</a>”，也是 DevSecOps 其中重要的一个环节。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645257211219-cbb64b0d-6fa9-4661-8e54-83886c911726.png#clientId=u7e7dce47-1975-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=u45e8d483&margin=%5Bobject%20Object%5D&originHeight=361&originWidth=649&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&status=done&style=none&taskId=ue78b02b5-95fe-4164-90fe-5547ebd5a8c&title="><br>作为研发过程中的制品管理，引入阶段的审核机制，使用中的安全，越来越成为大家关注的热点。如果所示，组织需要引入组件审核制度，杜绝开发人员随意的拉取互联网的开源制品，并且建立实时的漏洞扫描机制，形成组织级的白名单仓库。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645257563752-00c447fb-24e0-42de-9797-90405fba89dd.png#clientId=u7e7dce47-1975-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=368&id=u28d20d63&margin=%5Bobject%20Object%5D&name=image.png&originHeight=575&originWidth=1093&originalType=binary%E2%88%B6=1&rotation=0&showTitle=false&size=293917&status=done&style=none&taskId=uaaa48df0-b404-4542-a36c-802b821306c&title=&width=699" alt="image.png"></p>
<h3 id="SBOM-软件物料清单"><a href="#SBOM-软件物料清单" class="headerlink" title="SBOM-软件物料清单"></a>SBOM-软件物料清单</h3><p>现代软件主要是使用第三方和开源组件组装而成的，它们以复杂而独特的方式融合在一起，并与原始代码集成以实现所需的功能。除了通过在开源组件引入阶段加入安全审核机制，IT 企业往往也需要关注自己开发或使用的软件产品的组成，像我们在超市购买食品时在食品包装上看到的食品配料清单，标注了所用的所有材料。</p>
<p>为了准确摸清软件所含组件的情况，SBOM（即：Software Bill Of Materials）应运而生，其包括多种关键信息，如：组件名称、版本号、供应商等，这些关键信息在分析软件安全时发挥着关键作用。通过这些信息，可以追溯软件的原始供应链，极大提高开发者对其所用软件安全风险的理解，帮助企业在网络安全风险分析、漏洞管理和应急响应过程中提高效率。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645266294022-3b6dcd06-d151-4c84-a794-d5d865fa1048.png#clientId=u7e7dce47-1975-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=331&id=fXZvu&margin=%5Bobject%20Object%5D&name=image.png&originHeight=527&originWidth=1080&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=267804&status=done&style=none&taskId=u9bdfdcb7-2a28-4433-99e7-a4d8e61a16b&title=&width=679" alt="image.png"></p>
<p>对软件开发企业而言，SBOM 可有效控制开源组件风险，帮助企业更早识别并消除开源组件安全缺陷和许可风险；对软件采购企业而言，SBOM 可帮助采购决策者轻松了解开发方软件是否存在开源组件风险；对软件开发人员而言，SBOM 可帮助开发人员全面准确掌握其所研发软件的开源组件情况。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/5374140/1645266403725-755edfe1-f9ff-467d-ab0f-68651c63a718.png#clientId=u5568aa8e-25a6-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=378&id=u4c62a775&margin=%5Bobject%20Object%5D&name=image.png&originHeight=465&originWidth=720&originalType=url%E2%88%B6=1&rotation=0&showTitle=false&size=114314&status=done&style=none&taskId=u79ed479b-e1b0-48bd-ae02-fb58fb29966&title=&width=585" alt="image.png"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>制品管理是 DevOps 实践过程中的重要环节，起着承上启下，收集过程信息的重要角色；</li>
<li>于此同时，制品的引入使用会存在安全风险，组织需要关注这一点，避免类似 Log4j2 安全事件带来的一系列风险；</li>
<li>作为实践者，在制品的管理上需要结合组织和流水线需要，指定相应的规范，避免混乱；</li>
<li>好的制品管理流程，可减少开发自测和测试人员进行接收测试衔接过程中的低效沟通；</li>
</ul>
<p>这里仅仅是对制品管理做了全局的梳理，后续会对其中具体的知识点进行详细介绍。</p>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Owen Li</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://blog.devopsing.site/2022/01/14/yuque/rqeiq5/">http://blog.devopsing.site/2022/01/14/yuque/rqeiq5/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Owen Li</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">无标签</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的鼓励是我前进的动力！</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="https://gitee.com/owen2016/pic-hub/raw/master/pics/20201020234534.JPG" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="https://gitee.com/owen2016/pic-hub/raw/master/pics/20201020234556.JPG" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/03/17/yuque/aeqg7c/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/17.jpg" class="responsive-img" alt="最详尽教程完整介绍-Windows 的 Linux 子系统-WSL1&amp;WSL2">
                        
                        <span class="card-title">最详尽教程完整介绍-Windows 的 Linux 子系统-WSL1&amp;WSL2</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-03-17
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Owen Li
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/12/20/yuque/aq3rz4/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/4.jpg" class="responsive-img" alt="如何设计CI/CD流水线">
                        
                        <span class="card-title">如何设计CI/CD流水线</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-12-20
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Owen Li
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: DevOps在路上<br />'
            + '文章作者: Owen Li<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="486899256"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

            
                <div class="container row center-align" style="margin-bottom: 15px !important;">
                    <div class="col s12 m8 l8 copy-right">
                        Copyright&nbsp;&copy;
                        <span id="year">2020</span>
                        <a href="/about" target="_blank">
                            Owen Li
                        </a>
                        |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;
                        <a href="https://github.com/owen2016/owen2016.github.io" target="_blank">Matery</a>
                        <br>
                        
                            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">124.9k</span>&nbsp;字
                            
                                
                                    
                                        
                                            
                                                
                                                    <!-- <span id="busuanzi_container_site_pv" style='display:none'> -->
                                                    <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
                                                    </span>
                                                    
                                                        
                                                            <span id="busuanzi_container_site_uv">
                                                                <!-- <span id="busuanzi_container_site_uv" style='display:none'> -->
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
                                                            </span>
                                                            
                                                                <br>
                                                                
                                                                    <span id="sitetime">载入运行时间...</span>
                                                                    <script>
                                                                        function siteTime() {
                                                                            var seconds = 1000;
                                                                            var minutes = seconds * 60;
                                                                            var hours = minutes * 60;
                                                                            var days = hours * 24;
                                                                            var years = days * 365;
                                                                            var today = new Date();
                                                                            var startYear = "2020";
                                                                            var startMonth = "1";
                                                                            var startDate = "1";
                                                                            var startHour = "0";
                                                                            var startMinute = "0";
                                                                            var startSecond = "0";
                                                                            var todayYear = today.getFullYear();
                                                                            var todayMonth = today.getMonth() + 1;
                                                                            var todayDate = today.getDate();
                                                                            var todayHour = today.getHours();
                                                                            var todayMinute = today.getMinutes();
                                                                            var todaySecond = today.getSeconds();
                                                                            var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                                                                            var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                                                                            var diff = t2 - t1;
                                                                            var diffYears = Math.floor(diff / years);
                                                                            var diffDays = Math.floor((diff / days) - diffYears * 365);
                                                                            var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                                                                            var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                                                                                minutes);
                                                                            var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                                                                                diffMinutes * minutes) / seconds);
                                                                            if (startYear == todayYear) {
                                                                                document.getElementById("year").innerHTML = todayYear;
                                                                                document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                                                                                    " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                                                                            } else {
                                                                                document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                                                                                document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                                                                                    " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                                                                            }
                                                                        }
                                                                        setInterval(siteTime, 1000);
                                                                    </script>
                                                                    
                                                                        <br>
                                                                        
                                                                            <span id="icp"><img src="/medias/icp.png" style="vertical-align: text-bottom;" />
                <a href="https://www.beian.miit.gov.cn/" target="_blank">鄂ICP备2020017249号-1</a>
            </span>
                                                                            
                    </div>
                    <div class="col s12 m4 l4 social-link social-statis">
                        
    <a href="https://github.com/owen2016" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:libin95188@126.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>









    <a href="https://weibo.com/dreamfly95188" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/dreamfly95188" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/dream_fly" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/dream_fly" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>


                    </div>
                </div>
</footer>

<div class="progress-bar"></div>

<!-- 不蒜子计数初始值纠正 -->
<!-- <script>
    $(document).ready(function() {
        var int = setInterval(fixCount, 50);
        var pvcountOffset = 80000;
        var uvcountOffset = 20000;

        function fixCount() {
            if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
                $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset);
                clearInterval(int);
            }
            if ($("#busuanzi_container_site_pv").css("display") != "none") {
                $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据 
                clearInterval(int);
            }
        }
    });
</script> -->

    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?86e26a6f860a2299233e29f86f9f65a1";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
